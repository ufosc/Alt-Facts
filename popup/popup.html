<!DOCTYPE html>
<meta http-equiv="Content-Security-Policy" content="default-src *; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' 'unsafe-eval' http://www.google.com">
<html>
<head>
	<meta charset="utf-8">
	<link rel="stylesheet" href="popup.css"/>
</head>
<body>
	<!-- Content -->
	<div id="popup">
		<div id="current-section">
			<p>Current:</p>
			<a id="current-news-link" target="_blank" href=""><img id="current-news-image" src="" alt=""></a>
		</div>
		<div id="recommended-section">
			<p>Recommended:</p>
			<a id="recommended-news-first-link" target="_blank" href=""><img id="recommended-news-first-image" src="" alt=""></a>
			<a id="recommended-news-second-link" target="_blank" href=""><img id="recommended-news-second-image" src="" alt=""></a>
		</div>
	</div>
	<script type="application/javascript" src="/browser-polyfill.js"></script>
<script>
	
	function sleep(ms) {
		return new Promise(resolve => setTimeout(resolve, ms));
	
	}
	async function load_js1()
   {
	//Load gapi
      var head= document.getElementsByTagName('head')[0];
      var script= document.createElement('script');
      script.src= "https://apis.google.com/js/api.js?onload";
	  head.appendChild(script);
	  return await sleep(3000);
	  
   }

	
   function load_js2()
   {
	//Load everything else
      var head= document.getElementsByTagName('head')[0];
      var script= document.createElement('script');
      script.src= 'popup.js';
      head.appendChild(script);
   }

   load_js1().then(() => {
	load_js2();
   });
   


</script>

</body>
</html>